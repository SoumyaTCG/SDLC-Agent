import streamlit as st

class DisplayResultStreamlit:
    """
    Handles displaying the result generated by the SDLC agent.
    """

    def __init__(self, phase, graph, user_input):
        """
        Initializes the result display component.

        Args:
            phase (str): SDLC phase.
            graph (object): Compiled graph object.
            user_input (str): User-provided input.
        """
        self.phase = phase
        self.graph = graph
        self.user_input = user_input

    def display_result_on_ui(self):
        """
        Displays the output from the SDLC agent on the UI.
        """
        st.subheader(f"Results for: {self.phase}")

        with st.spinner("Generating response..."):
            try:
                # Execute the graph with user input
                result = self.graph.invoke({
                    "input": self.user_input
                })

                # Display the result
                st.write("### Response:")
                st.write(result)

            except Exception as e:
                st.error(f"An error occurred while generating the response: {e}")
